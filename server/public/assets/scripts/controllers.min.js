/*! prime_origin 2015-12-03 */
myApp.controller("AccountCtrl",["$scope","$http","$window","DataService",function(a,b,c,d){a.dataService=d,a.user={},void 0===a.dataService.peopleData()&&a.dataService.retrieveData().then(function(){var b=a.dataService.peopleData();b||(c.location.href="/"),a.user=a.dataService.peopleData()}),a.user=a.dataService.peopleData(),a.resetPassword=function(){console.log("clicked!");var c={username:a.user.username,email:a.user.email,password:a.user.newPassA};b.post("/password/reset",c).then(function(){a.user.newPassA="",a.user.newPassB="",a.userForm.$setPristine()})}}]),myApp.controller("AssignCtrl",["$scope","$http","$window","DataService",function(a,b,c,d){a.dataService=d,a.user={},a.restricted=function(){var b=a.dataService.peopleData();return b&&"instructor"==b.role?void 0:(console.log("Restricted!"),c.location.href="/user/logout")},void 0===a.dataService.peopleData()&&a.dataService.retrieveData().then(a.restricted).then(function(){a.user=a.dataService.peopleData()}),a.user=a.dataService.peopleData(),a.assignment={},a.makeAssignment=function(){console.log(a.assignment),b.post("/assign",a.assignment).then(function(b){b&&(a.assignment={})})}}]),myApp.controller("InstructorModalCtrl",["$scope","$http","$uibModalInstance","items","DataService",function(a,b,c,d,e){console.log("on instructor modal controller!"),a.assignment=d,console.log(a.assignment),a.ok=function(){b.put("/queue",a.assignment).then(function(a){console.log(a),c.close("Updated!")})},a.cancel=function(){c.dismiss("cancel")}}]),myApp.controller("PortfolioCtrl",["$scope","$http","$window","$filter","DataService","$uibModal",function(a,b,c,d,e,f){var g=d("orderBy");a.dataService=e,a.user={},a.portfolio=[],void 0===a.dataService.peopleData()&&a.dataService.retrieveData().then(function(){var b=a.dataService.peopleData();b||(c.location.href="/"),a.user=a.dataService.peopleData()}),a.user=a.dataService.peopleData(),a.populateTable=function(){b.get("/assign").then(function(b){a.portfolio=b.data,console.log(a.portfolio),a.sortBy("status_code",!1)})},a.open=function(b){switch(b.status_code){case 0:var c=f.open({animation:!1,templateUrl:"templates/studentmodal.html",controller:"StudentModalCtrl",size:"lg",resolve:{items:function(){return b}}});c.result.then(a.populateTable);break;case 1:var c=f.open({animation:!1,templateUrl:"templates/studentmodalsubmitted.html",controller:"StudentModalCtrl",size:"lg",resolve:{items:function(){return b}}});c.result.then(a.populateTable);break;case 2:var c=f.open({animation:!1,templateUrl:"templates/studentmodalreviewed.html",controller:"StudentModalCtrl",size:"lg",resolve:{items:function(){return b}}});c.result.then(a.populateTable)}},a.sortBy=function(b,c){a.portfolio=g(a.portfolio,b,c)},a.populateTable()}]),myApp.controller("QueueCtrl",["$scope","$http","$filter","$window","$uibModal","DataService",function(a,b,c,d,e,f){var g=c("orderBy");a.dataService=f,a.user={},a.restricted=function(){var b=a.dataService.peopleData();return b&&"instructor"==b.role?void 0:(console.log("Restricted!"),d.location.href="/user/logout")},void 0===a.dataService.peopleData()&&a.dataService.retrieveData().then(a.restricted).then(function(){a.user=a.dataService.peopleData()}),a.user=a.dataService.peopleData(),a.queue=[],a.populateTable=function(){b.get("/queue").then(function(b){a.queue=b.data,a.sortBy("-update_time",!1)})},a.sortBy=function(b,c){a.queue=g(a.queue,b,c)},a.open=function(b){var c=e.open({animation:!1,templateUrl:"templates/instructormodal.html",controller:"InstructorModalCtrl",size:"lg",resolve:{items:function(){return b}}});c.result.then(a.populateTable)},a.populateTable()}]),myApp.controller("StudentModalCtrl",["$scope","$http","$uibModalInstance","items","DataService",function(a,b,c,d,e){console.log("on student modal controller!"),a.assignment=d,console.log(a.assignment),a.ok=function(){b.post("/queue",a.assignment).then(function(a){console.log(a),c.close("Updated!")})},a.cancel=function(){c.dismiss("cancel")}}]);